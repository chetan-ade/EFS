var _0x2952=['file\x20uploaded\x20successfully','<script>alert(\x22file\x20uploaded\x20successfully\x22);</script>','/downloadFile','filename','listen','formidable','mkdirp','MongoClient','mongodb+srv://chetanade:improve619619@efs-zym9f.azure.mongodb.net/test?retryWrites=true','createServer','url','readFile','./html/main.html','text/html','write','end','writeHead','log','Checking\x20login...','IncomingForm','parse','password','connect','EFSDB','users','user\x20email\x20does\x20not\x20exists.','./loginFailed','_id','logged\x20in\x20successfully','<input\x20type=\x22hidden\x22\x20name=\x22email\x22\x20value=\x22','<h3>Files\x20Owned</h3>','<form\x20action=\x22./downloadFile\x22\x20method=\x22post\x22\x20enctype=\x22multipart/form-data\x22>','filesOwned','<input\x20type=\x22submit\x22\x20name=\x22filename\x22\x20value=\x22','<br><br>','</form','</body>','<script>alert(\x22login\x20successfully\x22);</script>','</html>','close','./html/login.html','<script>alert(\x22login\x20failed...Wrong\x20email\x20or\x20password.\x22);</script>','/register','./html/register.html','/registerAgain','<script>alert(\x22email\x20already\x20exists\x22);</script>','/registerCheck','checking\x20register..','collection','findOne','new\x20email','1\x20user\x27s\x20dir\x20created','insertOne','email\x20already\x20exists','1\x20user\x20added\x20to\x20database','./registerSuccess','email\x20already\x20exists..','./registerAgain','/registerSuccess','/uploadFile','/fileuploaded','email','name','updateOne','1\x20file\x20added\x20to\x20filesOwned','filetoupload','path','C:/Users/Chetan/Desktop/EFSstorage/','1\x20file\x20uploaded\x20to\x20filesystem','./html/uploadFile.html','</form>','length','\x22/>'];(function(_0x3bcab7,_0x1637f4){var _0x21939c=function(_0x5d00fc){while(--_0x5d00fc){_0x3bcab7['push'](_0x3bcab7['shift']());}};_0x21939c(++_0x1637f4);}(_0x2952,0x172));var _0x8995=function(_0x1696cc,_0x2cad12){_0x1696cc=_0x1696cc-0x0;var _0x2cfe08=_0x2952[_0x1696cc];return _0x2cfe08;};var http=require('http');var formidable=require(_0x8995('0x0'));var fs=require('fs');var mkdirp=require(_0x8995('0x1'));var MongoClient=require('mongodb')[_0x8995('0x2')];const url=_0x8995('0x3');http[_0x8995('0x4')](function(_0x4cc86b,_0x36fa4b){if(_0x4cc86b[_0x8995('0x5')]=='/'){fs[_0x8995('0x6')](_0x8995('0x7'),function(_0x1d3e06,_0x59dcbc){_0x36fa4b['writeHead'](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b[_0x8995('0x9')](_0x59dcbc);_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b[_0x8995('0x5')]=='/login'){fs[_0x8995('0x6')]('./html/login.html',function(_0x2a3c4a,_0x3473b8){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b[_0x8995('0x9')](_0x3473b8);_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b[_0x8995('0x5')]=='/loginCheck'){console[_0x8995('0xc')](_0x8995('0xd'));var _0x414737=new formidable[(_0x8995('0xe'))]();var _0x43ebeb;var _0x1eb956;var _0x1fd9c2;_0x414737[_0x8995('0xf')](_0x4cc86b,function(_0x181d29,_0x5f09bf,_0x48eb13){_0x43ebeb=_0x5f09bf['email'];_0x1eb956=_0x5f09bf[_0x8995('0x10')];MongoClient[_0x8995('0x11')](url,{'useNewUrlParser':!![]},function(_0x181d29,_0x5c73ab){if(_0x181d29)throw _0x181d29;var _0xf9e298=_0x5c73ab['db'](_0x8995('0x12'));_0xf9e298['collection'](_0x8995('0x13'))['findOne']({'_id':_0x43ebeb},function(_0x181d29,_0x929ec5){if(_0x181d29)throw _0x181d29;if(_0x929ec5===null){console['log'](_0x8995('0x14'));_0x36fa4b[_0x8995('0xb')](0x12d,{'Location':_0x8995('0x15')});_0x36fa4b['end']();}else{if(_0x929ec5[_0x8995('0x16')]==_0x43ebeb&&_0x929ec5[_0x8995('0x10')]==_0x1eb956){fs[_0x8995('0x6')]('./html/uploadFile.html',function(_0x181d29,_0x5cb089){console[_0x8995('0xc')](_0x8995('0x17'));_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b['write'](_0x5cb089);_0x36fa4b[_0x8995('0x9')](_0x8995('0x18')+_0x43ebeb+'\x22>');_0x36fa4b[_0x8995('0x9')]('</form>');_0x36fa4b[_0x8995('0x9')](_0x8995('0x19'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x1a'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x18')+_0x43ebeb+'\x22>');for(var _0x1da718=0x0;_0x1da718<_0x929ec5['filesOwned']['length'];_0x1da718++){_0x1fd9c2=_0x929ec5[_0x8995('0x1b')][_0x1da718];_0x36fa4b[_0x8995('0x9')](_0x8995('0x1c')+_0x1fd9c2+'\x22/>');_0x36fa4b[_0x8995('0x9')](_0x8995('0x1d'));}_0x36fa4b[_0x8995('0x9')](_0x8995('0x1e'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x1f'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x20'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x21'));_0x36fa4b[_0x8995('0xa')]();});}else{console[_0x8995('0xc')]('wrong\x20password');_0x36fa4b[_0x8995('0xb')](0x12d,{'Location':_0x8995('0x15')});_0x36fa4b[_0x8995('0xa')]();}}_0x5c73ab[_0x8995('0x22')]();});});});}else if(_0x4cc86b[_0x8995('0x5')]=='/loginFailed'){fs['readFile'](_0x8995('0x23'),function(_0x9b6e3,_0x2985aa){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':'text/html'});_0x36fa4b[_0x8995('0x9')](_0x2985aa);_0x36fa4b['write'](_0x8995('0x24'));_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b['url']==_0x8995('0x25')){fs[_0x8995('0x6')](_0x8995('0x26'),function(_0x37b0b6,_0x1763a3){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b[_0x8995('0x9')](_0x1763a3);_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b[_0x8995('0x5')]==_0x8995('0x27')){fs[_0x8995('0x6')](_0x8995('0x26'),function(_0x1a7d34,_0x40dbcf){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b[_0x8995('0x9')](_0x40dbcf);_0x36fa4b['write'](_0x8995('0x28'));_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b[_0x8995('0x5')]==_0x8995('0x29')){console[_0x8995('0xc')](_0x8995('0x2a'));var _0x414737=new formidable[(_0x8995('0xe'))]();var _0x43ebeb;var _0x1eb956;_0x414737[_0x8995('0xf')](_0x4cc86b,function(_0x2ea750,_0x1d99fc,_0x278509){_0x43ebeb=_0x1d99fc['email'];_0x1eb956=_0x1d99fc[_0x8995('0x10')];MongoClient[_0x8995('0x11')](url,{'useNewUrlParser':!![]},function(_0x2ea750,_0x871969){if(_0x2ea750)throw _0x2ea750;var _0x597b64=_0x871969['db'](_0x8995('0x12'));_0x597b64[_0x8995('0x2b')](_0x8995('0x13'))[_0x8995('0x2c')]({'_id':_0x43ebeb},function(_0x2ea750,_0x1d6483){if(_0x2ea750)throw _0x2ea750;if(_0x1d6483===null){console[_0x8995('0xc')](_0x8995('0x2d'));mkdirp('C:/Users/Chetan/Desktop/EFSstorage/'+_0x43ebeb);console[_0x8995('0xc')](_0x8995('0x2e'));var _0x1964e3={'_id':_0x43ebeb,'password':_0x1eb956};_0x597b64[_0x8995('0x2b')]('users')[_0x8995('0x2f')](_0x1964e3,function(_0x2ea750,_0x36fa4b){if(_0x2ea750){console[_0x8995('0xc')](_0x8995('0x30'));}else{console[_0x8995('0xc')](_0x8995('0x31'));_0x871969[_0x8995('0x22')]();}});_0x36fa4b['writeHead'](0x12d,{'Location':_0x8995('0x32')});_0x36fa4b[_0x8995('0xa')]();}else{console[_0x8995('0xc')](_0x8995('0x33'));_0x36fa4b['writeHead'](0x12d,{'Location':_0x8995('0x34')});_0x36fa4b[_0x8995('0xa')]();}_0x871969[_0x8995('0x22')]();});});});}else if(_0x4cc86b['url']==_0x8995('0x35')){fs[_0x8995('0x6')](_0x8995('0x7'),function(_0x167cd0,_0x2ac654){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b['write'](_0x2ac654);_0x36fa4b[_0x8995('0x9')]('<script>alert(\x22registered\x20successfully\x22);</script>');_0x36fa4b[_0x8995('0xa')]();});}else if(_0x4cc86b['url']==_0x8995('0x36')){fs[_0x8995('0x6')]('./html/uploadFile.html',function(_0x276dfd,_0x5ccd26){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b[_0x8995('0x9')](_0x5ccd26);_0x36fa4b['end']();});}else if(_0x4cc86b[_0x8995('0x5')]==_0x8995('0x37')){var _0x414737=new formidable['IncomingForm']();_0x414737[_0x8995('0xf')](_0x4cc86b,function(_0x2ddae7,_0x17fdcf,_0x273997){var _0x4c386d=_0x17fdcf[_0x8995('0x38')];MongoClient[_0x8995('0x11')](url,{'useNewUrlParser':!![]},function(_0x2ddae7,_0x11dcbb){if(_0x2ddae7)throw _0x2ddae7;var _0x34c1f8=_0x11dcbb['db'](_0x8995('0x12'));var _0x222f07={'_id':_0x4c386d};var _0x12fdf6={'$push':{'filesOwned':_0x273997['filetoupload'][_0x8995('0x39')]}};_0x34c1f8['collection'](_0x8995('0x13'))[_0x8995('0x3a')](_0x222f07,_0x12fdf6,function(_0x2ddae7,_0x36fa4b){if(_0x2ddae7)throw _0x2ddae7;console[_0x8995('0xc')](_0x8995('0x3b'));_0x11dcbb[_0x8995('0x22')]();});});var _0x3a9830=_0x273997[_0x8995('0x3c')][_0x8995('0x3d')];var _0x304598=_0x8995('0x3e')+_0x4c386d+'/'+_0x273997[_0x8995('0x3c')][_0x8995('0x39')];console[_0x8995('0xc')](_0x8995('0x3f'));fs['rename'](_0x3a9830,_0x304598,function(_0x2ddae7){if(_0x2ddae7)throw _0x2ddae7;MongoClient[_0x8995('0x11')](url,{'useNewUrlParser':!![]},function(_0x2ddae7,_0x5ad300){if(_0x2ddae7)throw _0x2ddae7;var _0x3d2df7=_0x5ad300['db'](_0x8995('0x12'));_0x3d2df7[_0x8995('0x2b')](_0x8995('0x13'))[_0x8995('0x2c')]({'_id':_0x4c386d},function(_0x2ddae7,_0x4ff4e8){if(_0x2ddae7)throw _0x2ddae7;fs['readFile'](_0x8995('0x40'),function(_0x2ddae7,_0x56ee31){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Type':_0x8995('0x8')});_0x36fa4b['write'](_0x56ee31);_0x36fa4b[_0x8995('0x9')](_0x8995('0x18')+_0x43ebeb+'\x22>');_0x36fa4b[_0x8995('0x9')](_0x8995('0x41'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x19'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x1a'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x18')+_0x43ebeb+'\x22>');console[_0x8995('0xc')](_0x4ff4e8);for(var _0x1ae02b=0x0;_0x1ae02b<_0x4ff4e8[_0x8995('0x1b')][_0x8995('0x42')];_0x1ae02b++){_0x1fd9c2=_0x4ff4e8[_0x8995('0x1b')][_0x1ae02b];_0x36fa4b[_0x8995('0x9')]('<input\x20type=\x22submit\x22\x20name=\x22filename\x22\x20value=\x22'+_0x1fd9c2+_0x8995('0x43'));_0x36fa4b[_0x8995('0x9')]('<br><br>');}_0x36fa4b['write'](_0x8995('0x1e'));_0x36fa4b[_0x8995('0x9')]('</body>');console[_0x8995('0xc')](_0x8995('0x44'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x45'));_0x36fa4b[_0x8995('0x9')](_0x8995('0x21'));_0x36fa4b[_0x8995('0xa')]();});_0x5ad300[_0x8995('0x22')]();});});});});}else if(_0x4cc86b[_0x8995('0x5')]==_0x8995('0x46')){var _0x414737=new formidable[(_0x8995('0xe'))]();_0x414737[_0x8995('0xf')](_0x4cc86b,function(_0x598d0b,_0x4c61f4,_0x195f9d){var _0x177e34=_0x4c61f4[_0x8995('0x38')];var _0x1fd9c2=_0x4c61f4[_0x8995('0x47')];console['log'](_0x177e34);console[_0x8995('0xc')](_0x1fd9c2);var _0x3694f8=_0x8995('0x3e')+_0x177e34+'/'+_0x1fd9c2;console[_0x8995('0xc')](_0x3694f8);fs[_0x8995('0x6')](_0x3694f8,function(_0x598d0b,_0x43d7e3){_0x36fa4b[_0x8995('0xb')](0xc8,{'Content-Disposition':'attachment;filename='+_0x1fd9c2});_0x36fa4b[_0x8995('0x9')](_0x43d7e3);_0x36fa4b['end']();});});}})[_0x8995('0x48')](0x1f90);